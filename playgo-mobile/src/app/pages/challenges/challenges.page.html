<ion-header appHeader></ion-header>
<ion-content [fullscreen]="true">
  <ion-segment
    mode="md"
    class="app-segment"
    [(ngModel)]="selectedSegment"
    scrollable
  >
    <ion-segment-button
      value="pastChallenges"
      checked
      class="app-segment-button"
    >
      <ion-label>{{'challenges.past' | translate}}</ion-label>
    </ion-segment-button>
    <ion-segment-button
      value="activeChallenges"
      checked
      class="app-segment-button"
    >
      <ion-label>{{'challenges.present' | translate}}</ion-label>
    </ion-segment-button>
    <ion-segment-button value="futureChallenges" class="app-segment-button">
      <ion-label>{{'challenges.future' | translate}}</ion-label>
    </ion-segment-button>
  </ion-segment>

  <div *ngIf="selectedSegment==='pastChallenges'">
    <app-challenges-stat> </app-challenges-stat>
    <!-- <app-challenge-card
      *ngFor="let challenge of (pastChallenges$ | async); trackBy challengeTracking;"
      [challenge]="challenge"
    >
    </app-challenge-card> -->
  </div>
  <div *ngIf="selectedSegment==='activeChallenges'">
    <div *ngFor="let campaign of campaignsWithChallenges">
      <div *ngIf=" activeChallenges[campaign?.campaign?.campaignId]?.length>0">
        <app-challenge-container
          [campaign]="campaign"
          [challenges]="activeChallenges[campaign?.campaign?.campaignId]"
          [type]="'active'"
        >
        </app-challenge-container>
      </div>
    </div>
  </div>
  <div *ngIf="selectedSegment==='futureChallenges'">
    <div *ngFor="let campaign of campaignsWithChallenges">
      <app-create-challenge-button
        [campaign]="campaign"
        (click)="goToCreateChallenge($event,campaign)"
      ></app-create-challenge-button>
      <div *ngIf=" futureChallenges[campaign?.campaign?.campaignId]?.length>0">
        <app-challenge-container
          [campaign]="campaign"
          [challenges]="futureChallenges[campaign?.campaign?.campaignId]"
          [type]="'future'"
        >
        </app-challenge-container>
      </div>
    </div>
  </div>
</ion-content>
